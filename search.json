[{"path":"/articles/Basic_calibration.html","id":"calibrate-good-times-come-on","dir":"Articles","previous_headings":"","what":"Calibrate good times, come on!","title":"Basic calibration","text":"First, let’s define target trying match . instance, want match prevalence 2-10 year olds two time points: must supply summary function calibrating. function takes raw model output returns vector (length timesteps), target variable. PfPr 2-10, helper function summary_pfpr_2_10(). also need set aspects simulation. case, set basic model run: Now time calibration. set tolerance 0.02. means distance target value model output prevalence needs <2%. tolerance specified unit target variable. also cheat bit put tight bound EIR search help speed code. Ok, ’ve calibrated. Lets run calibrated model see .","code":"# Define target, here two prevalence measures: target <- c(0.3, 0.3) # Time points at which to match target target_tt <- c(500, 600) parameters <- get_parameters(list(human_population = 1000)) set.seed(123) out <- calibrate(parameters = parameters,                  target = target,                  target_tt = target_tt,                  summary_function = summary_pfpr_2_10,                  tolerance = 0.02,                   interval = c(1, 6)) #> Trying EIR: 1 #> Current difference: -0.106 -0.101 #> Trying EIR: 6 #> Current difference: 0.106 0.0633 #> Trying EIR: 3.75 #> Current difference: 0.0878 0.0529 #> Trying EIR: 2.38 #> Current difference: -0.0192 -0.0187 #> Trying EIR: 2.38 #> Current difference: -0.00833 -0.0232 parameters <- set_equilibrium(parameters, init_EIR = out$root) raw <- run_simulation(timesteps = max(target_tt) + 100, parameters = parameters) pfpr <- summary_pfpr_2_10(raw)  pd <- data.frame(time = 1:(max(target_tt) + 100), pfpr = pfpr)  ggplot() +   geom_line(data = pd, aes(x = time, y = pfpr), col = \"deeppink\", size = 1) +   geom_point(aes(x = target_tt, y = target), col = \"dodgerblue\", size = 4) +    ylim(0, 1) +   theme_bw()"},{"path":"/articles/Basic_calibration.html","id":"tips-and-pointers","dir":"Articles","previous_headings":"","what":"Tips and pointers!","title":"Basic calibration","text":"Note, many situations possible calibrate tightly targets, especially multiple time points. just changing baseline EIR, trends targets time need captured aspects simulation set - example intervention coverage. Don’t expect able match data, ’ll never match trend increasing prevalence time model run increasing intervention coverage time ! struggling get calibrate function work, try checking: summary_function works. easiest way run single model run parameters run summary_function() output. Check ’re providing reasonable interval (range EIRs) tolerance fitting. Make sure ’re familiar stats::uniroot() function additional set-tuning arguments.","code":""},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Pete Winskill. Author, maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Winskill P (2022). cali: Good vibes model calibration. R package version 0.0.2.","code":"@Manual{,   title = {cali: Good vibes and model calibration},   author = {Pete Winskill},   year = {2022},   note = {R package version 0.0.2}, }"},{"path":"/index.html","id":"cali-","dir":"","previous_headings":"","what":"Good vibes and model calibration","title":"Good vibes and model calibration","text":"Use cali calibrate individual model output specific target. Cali developed primarily malariasimulation use case.","code":""},{"path":"/reference/calibrate.html","id":null,"dir":"Reference","previous_headings":"","what":"Calibrate — calibrate","title":"Calibrate — calibrate","text":"General calibration function malariasimulation. Please see documentation uniroot become familiar possible additional arguments convergence errors.","code":""},{"path":"/reference/calibrate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calibrate — calibrate","text":"","code":"calibrate(   parameters,   target,   target_tt,   summary_function,   tolerance,   interval = c(0.01, 2000)/365,   ... )"},{"path":"/reference/calibrate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calibrate — calibrate","text":"parameters malariasimulation model parameters target Values target variable calibrate . target_tt Timesteps target. summary_function function take raw model output argument produces vector target variable. tolerance routine complete difference target variable target values within range. Tolerance specified units target variable (e.g. target variable prevalence, tolerance 0.05, difference target variable target values must <5% routine succeed). interval search interval init EIRs. ... Additional arguments pass uniroot() function.","code":""},{"path":"/reference/calibrate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calibrate — calibrate","text":"Uniroot output","code":""},{"path":"/reference/objective.html","id":null,"dir":"Reference","previous_headings":"","what":"Objective function — objective","title":"Objective function — objective","text":"Quantifies distance target","code":""},{"path":"/reference/objective.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Objective function — objective","text":"","code":"objective(x, parameters, target, target_tt, summary_function, tolerance)"},{"path":"/reference/objective.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Objective function — objective","text":"x Input parameter varied. malariasimulation EIR. parameters malariasimulation model parameters target Values target variable calibrate . target_tt Timesteps target. summary_function function produces vector target variable. tolerance average tolerance, target variable units, match target.","code":""},{"path":"/reference/objective.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Objective function — objective","text":"Difference output target.","code":""},{"path":"/reference/summary_pfpr_2_10.html","id":null,"dir":"Reference","previous_headings":"","what":"Prevalence 2-10 year olds — summary_pfpr_2_10","title":"Prevalence 2-10 year olds — summary_pfpr_2_10","text":"Prevalence 2-10 year olds","code":""},{"path":"/reference/summary_pfpr_2_10.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prevalence 2-10 year olds — summary_pfpr_2_10","text":"","code":"summary_pfpr_2_10(x)"},{"path":"/reference/summary_pfpr_2_10.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prevalence 2-10 year olds — summary_pfpr_2_10","text":"x malariasimualtion model output","code":""},{"path":"/reference/summary_pfpr_2_10.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prevalence 2-10 year olds — summary_pfpr_2_10","text":"vector PfPR 2-10.","code":""}]
