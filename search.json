[{"path":"/articles/Basic_calibration.html","id":"calibrate-good-times-come-on","dir":"Articles","previous_headings":"","what":"Calibrate good times, come on!","title":"Basic calibration","text":"First, let’s define target trying match . instance, want match prevalence 2-10 year olds two time points: must supply summary function calibrating. function takes raw model output returns vector (length target), target variable. PfPr 2-10, example helper function summarises mean prevalence summary_mean_pfpr_2_10(). also need set aspects simulation. case, set basic model run: Now time calibration. set tolerance 0.005. means distance target value model output prevalence needs <0.5%. tolerance specified unit target variable. also cheat bit put tight bound EIR search help speed code. Ok, ’ve calibrated. Lets run calibrated model see .","code":"# Define target, here a prevalence measures: target <- 0.3 parameters <- get_parameters(list(human_population = 5000, individual_mosquitoes = FALSE)) parameters$timesteps <- 365 * 3 set.seed(123) out <- calibrate(parameters = parameters,                  target = target,                  summary_function = summary_mean_pfpr_2_10,                  tolerance = 0.01,                   low = 3, high = 5) #>  #> Trying EIR: 3.873 #>                        [,1] #> y                    0.2876 #> target               0.3000 #> difference          -0.0124 #> weighted_difference -0.0124 #>  #> Trying EIR: 4.4006 #>                       [,1] #> y                   0.3065 #> target              0.3000 #> difference          0.0065 #> weighted_difference 0.0065 parameters <- set_equilibrium(parameters, init_EIR = out) raw <- run_simulation(parameters$timesteps + 100, parameters = parameters) pfpr <- raw$n_detect_730_3650 / raw$n_730_3650  pd <- data.frame(time = 1:(parameters$timesteps + 100), pfpr = pfpr)  ggplot() +   geom_hline(yintercept = target, col = \"dodgerblue\", lty = 2) +    geom_line(data = pd, aes(x = time, y = pfpr), col = \"deeppink\", size = 1) +   ylim(0, 1) +   theme_bw() #> Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0. #> ℹ Please use `linewidth` instead."},{"path":"/articles/Basic_calibration.html","id":"tips-and-pointers","dir":"Articles","previous_headings":"","what":"Tips and pointers!","title":"Basic calibration","text":"Note, many situations possible calibrate tightly targets, especially multiple time points. just changing baseline EIR, trends targets time need captured aspects simulation set - example intervention coverage. Don’t expect able match data, ’ll never match trend increasing prevalence time model run increasing intervention coverage time ! struggling get calibrate function work, try checking: summary_function works. easiest way run single model run parameters run summary_function() output. ’re providing reasonable values low high (range EIRs) tolerance fitting. ’re population size large enough stochasticity ther results isn’t influential.","code":""},{"path":"/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Pete Winskill. Author, maintainer.","code":""},{"path":"/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Winskill P (2022). cali: Good vibes model calibration. R package version 0.2.0.","code":"@Manual{,   title = {cali: Good vibes and model calibration},   author = {Pete Winskill},   year = {2022},   note = {R package version 0.2.0}, }"},{"path":"/index.html","id":"cali-","dir":"","previous_headings":"","what":"Good vibes and model calibration","title":"Good vibes and model calibration","text":"Use cali calibrate individual model output specific target. Cali developed primarily malariasimulation use case.","code":""},{"path":"/reference/calibrate.html","id":null,"dir":"Reference","previous_headings":"","what":"Calibrate — calibrate","title":"Calibrate — calibrate","text":"General calibration function malariasimulation.","code":""},{"path":"/reference/calibrate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calibrate — calibrate","text":"","code":"calibrate(   target,   summary_function,   parameters,   tolerance,   weights = rep(1, length(target)),   elimination_check = TRUE,   maxiter = 20,   low = 0.001,   high = 2000 )"},{"path":"/reference/calibrate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calibrate — calibrate","text":"target Values target variable calibrate . summary_function function take raw model output argument produces vector target variable. parameters malariasimulation model parameters tolerance routine complete absolute sum weighted difference target variable target values falls value. Tolerance specified units target variable (e.g. target variable prevalence, tolerance 0.05, absolute sum weighted difference target variable target values must <5% routine succeed). weights numerical vector weights length target giving weights use elements target. elimination_check Check transmission maintained target points ongoing transmission exiting early. maxiter Maximum iterations. stopping criteria met maxiter, current best estimate returned low Lower boundof EIRs high Upper bound EIRs","code":""},{"path":"/reference/calibrate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calibrate — calibrate","text":"Uniroot output","code":""},{"path":"/reference/objective.html","id":null,"dir":"Reference","previous_headings":"","what":"Objective function — objective","title":"Objective function — objective","text":"Quantifies distance target","code":""},{"path":"/reference/objective.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Objective function — objective","text":"","code":"objective(x, parameters, summary_function)"},{"path":"/reference/objective.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Objective function — objective","text":"x Input parameter varied. malariasimulation EIR. parameters malariasimulation model parameters summary_function function take raw model output argument produces vector target variable.","code":""},{"path":"/reference/objective.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Objective function — objective","text":"Difference output target.","code":""},{"path":"/reference/proposal.html","id":null,"dir":"Reference","previous_headings":"","what":"Propose new EIR, moving on log scale — proposal","title":"Propose new EIR, moving on log scale — proposal","text":"Propose new EIR, moving log scale","code":""},{"path":"/reference/proposal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Propose new EIR, moving on log scale — proposal","text":"","code":"proposal(a, b)"},{"path":"/reference/proposal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Propose new EIR, moving on log scale — proposal","text":"lower EIR b upper EIR","code":""},{"path":"/reference/proposal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Propose new EIR, moving on log scale — proposal","text":"EIR","code":""},{"path":"/reference/summary_mean_pfpr_2_10.html","id":null,"dir":"Reference","previous_headings":"","what":"Prevalence 2-10 year olds — summary_mean_pfpr_2_10","title":"Prevalence 2-10 year olds — summary_mean_pfpr_2_10","text":"Prevalence 2-10 year olds","code":""},{"path":"/reference/summary_mean_pfpr_2_10.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prevalence 2-10 year olds — summary_mean_pfpr_2_10","text":"","code":"summary_mean_pfpr_2_10(x)"},{"path":"/reference/summary_mean_pfpr_2_10.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prevalence 2-10 year olds — summary_mean_pfpr_2_10","text":"x malariasimualtion model output","code":""},{"path":"/reference/summary_mean_pfpr_2_10.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prevalence 2-10 year olds — summary_mean_pfpr_2_10","text":"vector PfPR 2-10.","code":""}]
